-- =====================================================================
-- CAPA DAO (Data Access Objects) - IMPLEMENTACIÃ“N COMPLETADA
-- PROYECTO: Sistema de Inspecciones Fitosanitarias v2.1
-- FECHA: 13 de noviembre de 2025
-- =====================================================================

âœ… CAPA DAO COMPLETAMENTE IMPLEMENTADA
=======================================

ESTRUCTURA CREADA:
==================

ğŸ“¦ Paquete: DAO
â”œâ”€â”€ DAOBase.java (Clase base abstracta genÃ©rica)
â”‚
â”œâ”€â”€ USUARIOS:
â”‚   â”œâ”€â”€ UsuarioDAO.java
â”‚   â”œâ”€â”€ ProductorDAO.java
â”‚   â”œâ”€â”€ AsistenteTecnicoDAO.java
â”‚   â””â”€â”€ PropietarioDAO.java
â”‚
â”œâ”€â”€ ENTIDADES GEOGRÃFICAS:
â”‚   â”œâ”€â”€ DepartamentoDAO.java
â”‚   â”œâ”€â”€ MunicipioDAO.java
â”‚   â”œâ”€â”€ VeredaDAO.java
â”‚   â””â”€â”€ PredioDAO.java
â”‚
â”œâ”€â”€ ENTIDADES AGRÃCOLAS:
â”‚   â”œâ”€â”€ LugarProduccionDAO.java
â”‚   â”œâ”€â”€ LoteDAO.java
â”‚   â”œâ”€â”€ CultivoDAO.java
â”‚   â””â”€â”€ PlagaDAO.java
â”‚
â””â”€â”€ INSPECCIONES:
    â”œâ”€â”€ InspeccionFitosanitariaDAO.java
    â””â”€â”€ ResultadoTecnicoDAO.java

---

DESCRIPCIÃ“N DETALLADA:
======================

1. DAOBase.java (CLASE GENERICA BASE)
   â”œâ”€ Tipo: Clase Abstracta GenÃ©rica <T>
   â”œâ”€ PropÃ³sito: Proporciona mÃ©todos reutilizables para CRUD
   â”œâ”€ Patrones: Template Method
   â”‚
   â”œâ”€ MÃ‰TODOS GENÃ‰RICOS:
   â”‚  â”œâ”€ findOne() - Busca un registro
   â”‚  â”œâ”€ findMany() - Busca mÃºltiples registros
   â”‚  â”œâ”€ findOneWithParams() - Busca con parÃ¡metros
   â”‚  â”œâ”€ findManyWithParams() - Busca mÃºltiples con parÃ¡metros
   â”‚  â”œâ”€ executeUpdate() - Ejecuta INSERT/UPDATE/DELETE
   â”‚  â”œâ”€ executeInsertWithGeneratedKey() - INSERT retornando ID
   â”‚  â”œâ”€ setParameters() - Asigna parÃ¡metros a queries
   â”‚  â””â”€ closeResources() - Cierra conexiones/statements
   â”‚
   â”œâ”€ INTERFAZ FUNCIONAL:
   â”‚  â””â”€ ResultSetMapper<T> - Mapea ResultSet a objeto
   â”‚
   â””â”€ TIPOS DE PARÃMETROS SOPORTADOS:
      â”œâ”€ String
      â”œâ”€ Integer, Long
      â”œâ”€ Double
      â”œâ”€ java.sql.Date, java.sql.Timestamp
      â”œâ”€ Boolean
      â””â”€ Object genÃ©rico

---

2. DAOS DE USUARIOS:

   a) UsuarioDAO
      â”œâ”€ Entidad: Usuario (abstracta)
      â”œâ”€ MÃ©todos:
      â”‚  â”œâ”€ obtenerPorId(long id)
      â”‚  â”œâ”€ obtenerPorEmail(String email)
      â”‚  â”œâ”€ obtenerPorCedula(String cedula)
      â”‚  â”œâ”€ obtenerTodos()
      â”‚  â”œâ”€ obtenerPorRol(String rol)
      â”‚  â””â”€ eliminarLogico(long id)
      â””â”€ Notas: Clase base, Usuario es abstracta

   b) ProductorDAO
      â”œâ”€ Entidad: Productor
      â”œâ”€ Tabla: PRODUCTOR
      â”œâ”€ MÃ©todos CRUD:
      â”‚  â”œâ”€ crear()
      â”‚  â”œâ”€ obtenerPorId()
      â”‚  â”œâ”€ obtenerTodos()
      â”‚  â”œâ”€ actualizar()
      â”‚  â””â”€ eliminar()
      â””â”€ Relaciones: ID_USUARIO, ID_LUGAR_PRODUCCION

   c) AsistenteTecnicoDAO
      â”œâ”€ Entidad: AsistenteTecnico
      â”œâ”€ Tabla: ASISTENTE_TECNICO
      â”œâ”€ MÃ©todos CRUD:
      â”‚  â”œâ”€ crear()
      â”‚  â”œâ”€ obtenerPorId()
      â”‚  â”œâ”€ obtenerTodos()
      â”‚  â”œâ”€ actualizar()
      â”‚  â””â”€ eliminarLogico()
      â””â”€ Campos: ESPECIALIDAD, ACTIVO

   d) PropietarioDAO
      â”œâ”€ Entidad: Propietario
      â”œâ”€ Tabla: PROPIETARIO
      â”œâ”€ MÃ©todos CRUD:
      â”‚  â”œâ”€ crear()
      â”‚  â”œâ”€ obtenerPorId()
      â”‚  â”œâ”€ obtenerTodos()
      â”‚  â”œâ”€ actualizar()
      â”‚  â””â”€ eliminarLogico()
      â””â”€ Relaciones: ID_USUARIO, ID_PREDIO

---

3. DAOS DE ENTIDADES GEOGRÃFICAS:

   a) DepartamentoDAO
      â”œâ”€ Tabla: DEPARTAMENTO
      â”œâ”€ Campos: ID_DEPARTAMENTO, NOMBRE, CODIGO
      â””â”€ MÃ©todos: crear(), obtenerPorId(), obtenerTodos(), actualizar(), eliminar()

   b) MunicipioDAO
      â”œâ”€ Tabla: MUNICIPIO
      â”œâ”€ Campos: ID_MUNICIPIO, ID_DEPARTAMENTO, NOMBRE, CODIGO
      â””â”€ MÃ©todos: crear(), obtenerPorId(), obtenerTodos(), actualizar(), eliminar()

   c) VeredaDAO
      â”œâ”€ Tabla: VEREDA
      â”œâ”€ Campos: ID_VEREDA, ID_MUNICIPIO, NOMBRE, CODIGO
      â””â”€ MÃ©todos: crear(), obtenerPorId(), obtenerTodos(), actualizar(), eliminar()

   d) PredioDAO
      â”œâ”€ Tabla: PREDIO
      â”œâ”€ Campos: ID_PREDIO, ID_PROPIETARIO, ID_VEREDA, NOMBRE, AREA_HECTAREAS, MATRICULA
      â””â”€ MÃ©todos: crear(), obtenerPorId(), obtenerTodos(), actualizar(), eliminar()

---

4. DAOS DE ENTIDADES AGRÃCOLAS:

   a) LugarProduccionDAO
      â”œâ”€ Tabla: LUGAR_PRODUCCION
      â”œâ”€ Campos: ID_LUGAR_PRODUCCION, ID_PREDIO, NOMBRE, TIPO_CULTIVO
      â””â”€ MÃ©todos: crear(), obtenerPorId(), obtenerTodos(), actualizar(), eliminar()

   b) LoteDAO
      â”œâ”€ Tabla: LOTE
      â”œâ”€ Campos: ID_LOTE, ID_LUGAR_PRODUCCION, NUMERO_LOTE, AREA_HECTAREAS
      â””â”€ MÃ©todos: crear(), obtenerPorId(), obtenerTodos(), actualizar(), eliminar()

   c) CultivoDAO
      â”œâ”€ Tabla: CULTIVO
      â”œâ”€ Campos: ID_CULTIVO, ID_LOTE, TIPO_CULTIVO, FECHA_SIEMBRA, ESTADO
      â”œâ”€ MÃ©todos:
      â”‚  â”œâ”€ crear()
      â”‚  â”œâ”€ obtenerPorId()
      â”‚  â”œâ”€ obtenerTodos() - solo ACTIVOS
      â”‚  â”œâ”€ actualizar()
      â”‚  â”œâ”€ cambiarEstado(long id, String estado)
      â”‚  â””â”€ eliminar()
      â””â”€ Estados: ACTIVO, INACTIVO

   d) PlagaDAO
      â”œâ”€ Tabla: PLAGA
      â”œâ”€ Campos: ID_PLAGA, NOMBRE_COMUN, NOMBRE_CIENTIFICO, DESCRIPCION, NIVEL_PELIGROSIDAD
      â””â”€ MÃ©todos: crear(), obtenerPorId(), obtenerTodos(), actualizar(), eliminar()

---

5. DAOS DE INSPECCIONES:

   a) InspeccionFitosanitariaDAO
      â”œâ”€ Tabla: INSPECCION_FITOSANITARIA
      â”œâ”€ Campos: ID_INSPECCION, ID_CULTIVO, ID_ASISTENTE_TECNICO, FECHA_INSPECCION, ESTADO
      â”œâ”€ MÃ©todos:
      â”‚  â”œâ”€ crear()
      â”‚  â”œâ”€ obtenerPorId()
      â”‚  â”œâ”€ obtenerTodos()
      â”‚  â”œâ”€ obtenerPorEstado(String estado)
      â”‚  â”œâ”€ actualizar()
      â”‚  â”œâ”€ cambiarEstado(long id, String estado)
      â”‚  â””â”€ eliminar()
      â””â”€ Estados: PENDIENTE, COMPLETADA

   b) ResultadoTecnicoDAO
      â”œâ”€ Tabla: RESULTADO_TECNICO
      â”œâ”€ Campos: ID_RESULTADO, ID_INSPECCION, ID_PLAGA, NIVEL_INFESTACION, RECOMENDACIONES
      â”œâ”€ MÃ©todos:
      â”‚  â”œâ”€ crear()
      â”‚  â”œâ”€ obtenerPorId()
      â”‚  â”œâ”€ obtenerTodos()
      â”‚  â”œâ”€ actualizar()
      â”‚  â””â”€ eliminar()
      â””â”€ Niveles: BAJO, MEDIO, ALTO

---

PATRONES IMPLEMENTADOS:
=======================

âœ… DAO PATTERN
   â””â”€ Abstrae acceso a datos de la lÃ³gica de negocio

âœ… TEMPLATE METHOD PATTERN
   â””â”€ DAOBase define estructura, subclases especializan

âœ… GENERIC PROGRAMMING
   â””â”€ DAOBase<T> reutiliza cÃ³digo para mÃºltiples entidades

âœ… FUNCTIONAL INTERFACES
   â””â”€ ResultSetMapper<T> para mapeo flexible

---

CARACTERÃSTICAS DE IMPLEMENTACIÃ“N:
===================================

âœ… GESTIÃ“N DE RECURSOS:
   â”œâ”€ closeResources() cierra ResultSet, Statement, Connection
   â”œâ”€ Manejo de excepciones SQL
   â””â”€ LiberaciÃ³n automÃ¡tica en bloques finally

âœ… VALIDACIÃ“N:
   â”œâ”€ VerificaciÃ³n de conexiÃ³n disponible
   â”œâ”€ Manejo de parÃ¡metros null
   â””â”€ Tipos de parÃ¡metros flexibles

âœ… OPERACIONES SOPORTADAS:
   â”œâ”€ SELECT (findOne, findMany)
   â”œâ”€ INSERT (crear con retorno de ID)
   â”œâ”€ UPDATE (actualizar)
   â”œâ”€ DELETE (eliminar)
   â””â”€ Queries con parÃ¡metros preparados

âœ… DOCUMENTACIÃ“N:
   â”œâ”€ Todos los archivos con v2.1
   â”œâ”€ 4 autores especificados
   â”œâ”€ JavaDoc completo en cada mÃ©todo
   â””â”€ Descripciones de parÃ¡metros y excepciones

---

EJEMPLO DE USO:
===============

// 1. Crear un DAO
CultivoDAO cultivoDAO = new CultivoDAO();

// 2. Crear un cultivo
Cultivo cultivo = new Cultivo();
cultivo.setId("CULT001");
long idGenerado = cultivoDAO.crear(cultivo);

// 3. Obtener por ID
Cultivo obtenido = cultivoDAO.obtenerPorId(idGenerado);

// 4. Obtener todos
List<Cultivo> todos = cultivoDAO.obtenerTodos();

// 5. Actualizar
cultivo.setId("CULT001_UPDATED");
int filasActualizadas = cultivoDAO.actualizar(cultivo);

// 6. Cambiar estado
int estadoActualizado = cultivoDAO.cambiarEstado(idGenerado, "INACTIVO");

// 7. Eliminar
int filasEliminadas = cultivoDAO.eliminar(idGenerado);

---

FLUJO DE DATOS:
===============

AplicaciÃ³n
    â†“
Servicio (LÃ³gica de Negocio)
    â†“
DAO (Acceso a Datos)
    â†“
DAOBase (Operaciones GenÃ©ricas)
    â†“
DBConnection (ConexiÃ³n Oracle)
    â†“
JDBC Oracle
    â†“
Base de Datos Oracle

---

MANEJO DE EXCEPCIONES:
======================

Todas las operaciones lanzan SQLException:
â”œâ”€ ClassNotFoundException - Driver JDBC no encontrado
â”œâ”€ SQLException - Errores de conexiÃ³n o SQL
â”œâ”€ Errores cerrados en finally blocks
â””â”€ Se propagan a la capa de servicios

---

PRÃ“XIMOS PASOS:
===============

1. â³ Crear SERVICIOS que usen los DAOs
   â””â”€ CultivoService, InspeccionService, etc.

2. â³ Implementar TRANSACCIONES
   â””â”€ Operaciones multi-tabla atÃ³micas

3. â³ Agregar VALIDACIONES DE NEGOCIO
   â””â”€ Reglas de inspecciÃ³n fitosanitaria

4. â³ Crear INTERFAZ GRÃFICA (GUI)
   â””â”€ Swing o JavaFX con acceso a datos

5. â³ Implementar LOGGING
   â””â”€ Log4j para auditorÃ­a

6. â³ Agregar PRUEBAS UNITARIAS
   â””â”€ JUnit con mocks de DAOs

---

ESTADÃSTICAS:
==============

Total de DAOs creados: 15
â”œâ”€ DAOBase (genÃ©rica)
â”œâ”€ UsuarioDAO (base abstracta)
â”œâ”€ 3 DAOs de usuarios especÃ­ficos
â”œâ”€ 4 DAOs geogrÃ¡ficos
â”œâ”€ 4 DAOs agrÃ­colas
â””â”€ 2 DAOs de inspecciones

MÃ©todos genÃ©ricos en DAOBase: 10+
Tipos de parÃ¡metros soportados: 8
DocumentaciÃ³n: Completa v2.1 con 4 autores

---

ESTADO FINAL:
==============

âœ… Capa de Modelo: COMPLETA (14 clases)
âœ… Capa de Base de Datos: COMPLETA (7 clases)
âœ… Scripts SQL: COMPLETOS (15 tablas)
âœ… Capa DAO: COMPLETA (15 DAOs)

PRÃ“XIMA FASE: Servicios y LÃ³gica de Negocio

=====================================================================
âœ… IMPLEMENTACIÃ“N DE CAPA DAO COMPLETADA CON Ã‰XITO
=====================================================================
